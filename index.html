<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport"
 content="width=device-width,
 initial-scale=1.0,
 maximum-scale=1.0,
 user-scalable=no,
 viewport-fit=cover">

<title>Blood of the Ronin</title>

<style>
body{
 margin:0;
 background:black;
 overflow:hidden;
}

/* 캔버스 */
canvas{
 position:fixed;
 top:0;
 left:0;
}

/* 하단 UI */
#ui{
 position:fixed;
 bottom:0;
 width:100%;
 height:110px;
 padding-bottom:env(safe-area-inset-bottom);
 background:linear-gradient(#1a0000,#000);
 border-top:3px solid #550000;
 display:flex;
 align-items:center;
 justify-content:space-between;
 padding:0 25px;
 box-sizing:border-box;
}

/* 이동키 */
#movePad{
 width:80px;
 height:80px;
 border-radius:50%;
 background:rgba(255,255,255,0.1);
 border:2px solid #555;
}

/* HP 바 */
#hpContainer{
 flex:1;
 margin:0 20px;
 height:18px;
 background:#330000;
 border:2px solid #990000;
}

#hpBar{
 height:100%;
 width:100%;
 background:#ff0000;
}

/* 공격 버튼 */
#attackBtn{
 width:80px;
 height:80px;
 border-radius:50%;
 background:#990000;
 border:3px solid #ff4444;
 display:flex;
 align-items:center;
 justify-content:center;
 font-size:26px;
 color:white;
 transition:0.1s;
}

/* 눌림 효과 */
#attackBtn.active{
 background:#ff0000;
 transform:scale(0.9);
 box-shadow:0 0 20px #ff0000;
}
</style>
</head>
<body>

<canvas id="game"></canvas>

<div id="ui">
 <div id="movePad"></div>

 <div id="hpContainer">
   <div id="hpBar"></div>
 </div>

 <div id="attackBtn">⚔</div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const uiHeight = 110;

function resize(){
 canvas.width = window.innerWidth;
 canvas.height = window.innerHeight - uiHeight;
}
resize();
window.addEventListener("resize",resize);

/* 플레이어 */
let player = {
 x: canvas.width/2,
 y: canvas.height/2,
 hp: 100
};

/* 공격 상태 */
let attacking = false;

const attackBtn = document.getElementById("attackBtn");

attackBtn.addEventListener("touchstart",()=>{
 attacking = true;
 attackBtn.classList.add("active");
});
attackBtn.addEventListener("touchend",()=>{
 attacking = false;
 attackBtn.classList.remove("active");
});
attackBtn.addEventListener("mousedown",()=>{
 attacking = true;
 attackBtn.classList.add("active");
});
attackBtn.addEventListener("mouseup",()=>{
 attacking = false;
 attackBtn.classList.remove("active");
});

/* HP 표시 */
function updateHP(){
 document.getElementById("hpBar").style.width = player.hp + "%";
}

/* 기본 렌더 */
function draw(){
 ctx.fillStyle="#111";
 ctx.fillRect(0,0,canvas.width,canvas.height);

 /* 플레이어 */
 ctx.fillStyle = attacking ? "#ffff00" : "#aa0000";
 ctx.fillRect(player.x-15,player.y-15,30,30);

 requestAnimationFrame(draw);
}
draw();
</script>
</body>
</html>
