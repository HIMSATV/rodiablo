
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Blood of the Ronin - Diablo Style</title>
<style>
body { margin:0; background:black; overflow:hidden; font-family:serif; }
canvas { display:block; }

#ui-bar {
  position:fixed;
  bottom:0;
  width:100%;
  height:90px;
  background:linear-gradient(#2b0000,#000);
  border-top:3px solid #550000;
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:10px;
  box-sizing:border-box;
  color:#ddd;
}

.orb {
  width:70px;
  height:70px;
  border-radius:50%;
  border:3px solid #550000;
  background:radial-gradient(circle at 30% 30%, #ff0000, #550000);
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:bold;
}

#center-ui {
  text-align:center;
  font-size:14px;
  color:#ccc;
}
</style>
</head>
<body>

<canvas id="game"></canvas>

<div id="ui-bar">
  <div class="orb" id="hpOrb">100</div>
  <div id="center-ui">
    <div>Blood of the Ronin</div>
    <div>Tap to Move / Auto Slash</div>
  </div>
  <div class="orb" style="background:radial-gradient(circle at 30% 30%, #00aaff, #003355);">SK</div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight - 90;

let player = {x:canvas.width/2, y:canvas.height/2, hp:100, level:1, xp:0};
let enemies = [];
let attacking = false;

function spawnEnemy(){
  enemies.push({
    x:Math.random()*canvas.width,
    y:Math.random()*canvas.height,
    hp:20
  });
}

for(let i=0;i<6;i++) spawnEnemy();

canvas.addEventListener("touchstart", handleInput);
canvas.addEventListener("mousedown", handleInput);

function handleInput(e){
  let x = e.touches ? e.touches[0].clientX : e.clientX;
  let y = e.touches ? e.touches[0].clientY : e.clientY;
  player.x = x;
  player.y = y;
  attacking = true;
  setTimeout(()=>attacking=false,250);
}

function update(){
  enemies.forEach(enemy=>{
    let dx = player.x - enemy.x;
    let dy = player.y - enemy.y;
    let dist = Math.sqrt(dx*dx+dy*dy);
    if(dist>0){
      enemy.x += dx/dist*0.7;
      enemy.y += dy/dist*0.7;
    }

    if(dist < 20){
      player.hp -= 0.3;
    }

    if(attacking && dist < 45){
      enemy.hp -= 8;
    }
  });

  enemies = enemies.filter(e=>{
    if(e.hp<=0){
      player.xp += 10;
      if(player.xp >= player.level*50){
        player.level++;
        player.xp = 0;
        player.hp = 100;
      }
      return false;
    }
    return true;
  });

  if(enemies.length < 5){
    spawnEnemy();
  }

  document.getElementById("hpOrb").innerText = Math.max(0,Math.floor(player.hp));
}

function draw(){
  ctx.fillStyle="#111";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // dungeon floor grid
  ctx.strokeStyle="#222";
  for(let x=0;x<canvas.width;x+=40){
    ctx.beginPath();
    ctx.moveTo(x,0);
    ctx.lineTo(x,canvas.height);
    ctx.stroke();
  }
  for(let y=0;y<canvas.height;y+=40){
    ctx.beginPath();
    ctx.moveTo(0,y);
    ctx.lineTo(canvas.width,y);
    ctx.stroke();
  }

  // enemies
  ctx.fillStyle="#770000";
  enemies.forEach(e=>{
    ctx.beginPath();
    ctx.arc(e.x,e.y,12,0,Math.PI*2);
    ctx.fill();
  });

  // player
  ctx.fillStyle = attacking ? "#ffffaa" : "#dddddd";
  ctx.beginPath();
  ctx.arc(player.x,player.y,14,0,Math.PI*2);
  ctx.fill();

  // shadow vignette
  let gradient = ctx.createRadialGradient(player.x,player.y,50,player.x,player.y,200);
  gradient.addColorStop(0,"rgba(0,0,0,0)");
  gradient.addColorStop(1,"rgba(0,0,0,0.85)");
  ctx.fillStyle = gradient;
  ctx.fillRect(0,0,canvas.width,canvas.height);
}

function gameLoop(){
  update();
  draw();
  requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>
